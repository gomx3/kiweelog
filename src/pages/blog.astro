---
import BaseLayout from '../layouts/BaseLayout.astro'
import BlogPost from '../common/BlogPost.astro'
import { getCollection } from 'astro:content'

const allPosts = (await getCollection('blog')).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
---

<BaseLayout>
    <div class="flex flex-col gap-12">
        <div class="flex flex-col gap-4">
            <h1 class="text-3xl font-bold text-center">📄 Posts</h1>
            <p class="text-center text-stone-600 dark:text-stone-400">
                총 {allPosts.length}개의 포스트가 있습니다.
            </p>
        </div>

        <ul class="space-y-8">
            {
                allPosts.map((post) => (
                    <li>
                        <BlogPost
                            url={`/posts/${post.id}/`}
                            title={post.data.title}
                            description={post.data.description}
                            image={post.data.image}
                        />
                    </li>
                ))
            }
        </ul>
    </div>
</BaseLayout>
